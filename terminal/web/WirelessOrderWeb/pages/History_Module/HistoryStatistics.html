<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>无线点餐网页终端</title>

<link rel="stylesheet" type="text/css" href="../../extjs/resources/css/ext-all.css" />
<link rel="stylesheet" type="text/css" href="../../css/myExt.css" />
<link rel="stylesheet" type="text/css" href="../../extjs/ext-patch.css" />
<script type="text/javascript" src="../../extjs/ext-base.js"></script>
<script type="text/javascript" src="../../extjs/ext-all.js"></script>
<script type="text/javascript" src="../../js/common/Ext.ux.js"></script>
<script type="text/javascript" src="../../js/common/Ext.ux.check.js"></script>

<!-- 解决Grid不能选择复制问题 -->
<script type="text/javascript" src="../../extjs/ext-lang-zh_CN.js"></script>

<!-- 实现多选JS -->
<script type="text/javascript" src="../../extjs/multiselect/DDView.js"></script>
<script type="text/javascript" src="../../extjs/multiselect/MultiSelect.js"></script>
<script type="text/javascript" src="../../extjs/multiselect/ItemSelector.js"></script>
<link rel="stylesheet" type="text/css" href="../../extjs/multiselect/multiselect.css" />

<!-- css -->
<link rel="stylesheet" type="text/css" href="../../css/systemSetting.css" />
<link rel="stylesheet" type="text/css" href="../../css/header.css" />
<link rel="stylesheet" type="text/css" href="../../css/tableList.css" />
<link rel="stylesheet" type="text/css" href="../../css/tableStatus.css" />
<link rel="stylesheet" type="text/css" href="../../css/systemSetting.css" />

<!-- jquery lib -->
<script type="text/javascript" src="../../jquery/jquery-1.5.1.min.js"></script>

<!-- components -->
<script type="text/javascript" src="../../js/components/Ext.ux.ImageButton.js"></script>
<script type="text/javascript" src="../../js/components/functionLib.js"></script>
<script type="text/javascript" src="../../js/components/translateValue.js"></script>

<script type="text/javascript">
	Ext.onReady(function() {
		Ext.BLANK_IMAGE_URL = "../../extjs/resources/images/default/s.gif";
	});
	var Request = new URLParaQuery();

	// global variable
	var restaurantID = Request["restaurantID"];
	var operatorName = "";
	var pin = Request["pin"];

	var currRowIndex = -1;
	var shiftDtlRowIndex = -1;
	var dailySettleDtlRowIndex = -1;

	var billJSON = {};
	var conditionType = "text";

	var isPrompt = false;

	var queryTpyeBill;
	var queryOperatorBill;
	var queryValueBill;

	//統計
	// kitchen
	var kitchenStaticBeginDate;
	var kitchenStaticEndDate;
	var kitchenStaticString = "";
	var kitchenMultSelectData = [];
	var kitchenStaticRecordCount = 10;
	// dept
	var deptStaticBeginDate;
	var deptStaticEndDate;
	var deptStaticString = "";
	var deptMultSelectData = [];
	var deptStaticRecordCount = 10;
	// shift
	var shiftStaticRecordCount = 10;
	var begDateMStatShift;
	var endDateMStatShift;
	// daily settle
	var dailySettleStaticRecordCount = 10;
	var begDateMStatDailySettle;
	var endDateMStatDailySettle;
	// region
	var businessStaticBeginDate;
	var businessStaticEndDate;
	var businessMultSelectData = [];
	var businessStaticRecordCount = 10;

	//明細表格分頁記錄數
	var billDetailpageRecordCount = 10;

	var billRecordCount = 15;
	
	var queryType = "normal";
	
	var salesSubWin, salesSubWinTabPanel, orderFoodStatPanel, orderFoodStatPanelDeptTree, kitchenStatPanel, deptStatPanel;;
</script>

<script type="text/javascript" src="../../js/History/bills/billsFuncLib.js"></script>
<script type="text/javascript" src="../../js/History/bills/billGeneral/billsLoad.js"></script>
<script type="text/javascript" src="../../js/History/bills/billStatistics/kitchenStatistics.js"></script>
<script type="text/javascript" src="../../js/History/bills/billStatistics/deptStatistics.js"></script>
<!-- <script type="text/javascript"
	src="../../js/History/bills/billStatistics/regionStatistics.js"></script>
<script type="text/javascript"
	src="../../js/History/bills/billStatistics/discountStatistics.js"></script> -->
<script type="text/javascript" src="../../js/History/bills/billStatistics/shiftStatistics.js"></script>
<script type="text/javascript" src="../../js/History/bills/billStatistics/dailySettleStatistics.js"></script>
<script type="text/javascript" src="../../js/History/bills/billStatistics/businessStatistics.js"></script>
	
<script type="text/javascript" src="../../js/History/bills/billStatistics/businessSumStatistics.js"></script>	
<script type="text/javascript" src="../../js/History/bills/billStatistics/salesSubStatistics.js"></script>
<script type="text/javascript" src="../../js/History/bills/billStatistics/cancelledFoodStatistics.js"></script>	

<script type="text/javascript" src="../../js/History/bills/billGeneral/billsMain.js"></script>

</head>
<body onload="billHistoryOnLoad()">
	<script type="text/javascript" src="../../extjs/examples.js"></script>

	<!------------------- layout ------------------------>
	<div id="west"></div>
	<div id="north"></div>
	<div id="south"></div>
	<div id="west"></div>
	<div id="center"></div>
	<div id="temp"></div>
	
	<!-- bill sum -->
	<div id="billSum" style="font-weight: bold; font-size: 15px;">
		<table>
			<tr>
				<td style="width: 660px">&nbsp;</td>
				<td style="width: 60px">合计：</td>
				<td style="width: 120px"><div id="shouldPaySum">0</div></td>
				<td style="width: 120px"><div id="actualPaySum">0</div></td>
			</tr>
		</table>
	</div>

	<!-- bill view -->
	<div id="billView" style="font-size: 14px;">
		<table>
			<tr>
				<td><table>
						<tr>
							<td style="width: 20px">&nbsp;</td>
							<td style="width: 80px">账单号：</td>
							<td style="width: 80px" id="billIDBV">----</td>
							<td style="width: 60px">&nbsp;</td>
							<td style="width: 80px">类型：</td>
							<td style="width: 80px" id="billTypeBV">--</td>
						</tr>
						<tr>
							<td style="width: 20px">&nbsp;</td>
							<td style="width: 80px">台号：</td>
							<td style="width: 80px" id="tableNbrBV">----</td>
							<td style="width: 60px">&nbsp;</td>
							<td style="width: 80px">人数：</td>
							<td style="width: 80px" id="personNbrBV">--</td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td>
					<table>
						<tr>
							<td style="width: 20px">&nbsp;</td>
							<td style="width: 80px">日期：</td>
							<td style="width: 160px" id="billDateBV">2011-01-02 00:00:00</td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td>
					<table>
						<tr>
							<td style="width: 20px">&nbsp;</td>
							<td style="width: 80px">结账方式：</td>
							<td style="width: 80px" id="payTypeBV">--</td>
							<td style="width: 60px">&nbsp;</td>
							<td style="width: 80px">付款方式：</td>
							<td style="width: 80px" id="payMannerBV">--</td>
						</tr>
						<tr>
							<td style="width: 20px">&nbsp;</td>
							<td style="width: 80px">服务费：</td>
							<td style="width: 80px" id="serviceRateBV">0.00%</td>
						</tr>
						<tr>
							<td style="width: 20px">&nbsp;</td>
							<td style="width: 80px">服务员：</td>
							<td style="width: 80px" id="waiterBV">--</td>
						</tr>
					</table></td>
			</tr>
		</table>

	</div>


	<!-- bill view add info -->
	<div id="billViewAddInfo" style="font-size: 15px;">
		<table>
			<tr>
				<td style="width: 160px">&nbsp;</td>
				<td style="width: 60px">赠送：</td>
				<td style="width: 100px" id="forFreeBV">￥0.00</td>
				<td style="width: 60px">应收：</td>
				<td style="width: 100px" id="shouldPayBV">￥0.00</td>
			</tr>
			<tr>
				<td style="width: 160px">&nbsp;</td>
				<td style="width: 60px">折扣：</td>
				<td style="width: 100px" id="discountBV">￥0.00</td>
				<td style="width: 60px">实收：</td>
				<td style="width: 100px" id="actrualPayBV">￥0.00</td>
			</tr>
		</table>
	</div>

	<!------------------- shift check table ------------------------>
	<div id="shiftCheckTableDiv">
		<table border="1" id="shiftContentCheck">
			<tr>
				<td id="shiftTitle">交班对帐表</td>
			</tr>
			<tr>
				<td>
					<table>
						<tr>
							<td><table>
									<tr>
										<td style="width: 15px" />
										<td class="shiftInfo">交班人：</td>
										<td id="shiftOperator">----</td>
										<td style="width: 120px" />
										<td class="shiftInfo">帐单总数：</td>
										<td id="shiftBillCount">8888</td>
									</tr>
								</table></td>

						</tr>
						<tr>
							<td><table>
									<tr>
										<td style="width: 15px; height: 20px" />
										<td class="shiftInfo">开始时间：</td>
										<td id="shiftStartTime">2000-01-01 00:00:00</td>
									</tr>
									<tr>
										<td style="height: 20px" />
										<td class="shiftInfo">结束时间：</td>
										<td id="shiftEndTime">2000-01-01 00:00:00</td>
									</tr>
								</table>
							</td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td><table>
						<tr>
							<td style="width: 30px; height: 20px" />
							<td style="width: 140px;" class="shiftInfo">收款方式</td>
							<td style="width: 140px; text-align:right;" class="shiftInfo">账单数</td>
							<td style="width: 140px; text-align:right;" class="shiftInfo">金额</td>
							<td style="width: 140px; text-align:right;" class="shiftInfo">实收</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">现金</td>
							<td style="text-align:right;" id="billCount1">8888</td>
							<td style="text-align:right;" id="amount1">8888.88</td>
							<td style="text-align:right;" id="actual1">8888.88</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">刷卡</td>
							<td style="text-align:right;" id="billCount2">8888</td>
							<td style="text-align:right;" id="amount2">8888.88</td>
							<td style="text-align:right;" id="actual2">8888.88</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">会员卡</td>
							<td style="text-align:right;" id="billCount3">8888</td>
							<td style="text-align:right;" id="amount3">8888.88</td>
							<td style="text-align:right;" id="actual3">8888.88</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">签单</td>
							<td style="text-align:right;" id="billCount4">8888</td>
							<td style="text-align:right;" id="amount4">8888.88</td>
							<td style="text-align:right;" id="actual4">8888.88</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">挂账</td>
							<td style="text-align:right;" id="billCount5">8888</td>
							<td style="text-align:right;" id="amount5">8888.88</td>
							<td style="text-align:right;" id="actual5">8888.88</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">合计：</td>
							<td style="text-align:right;" id="billCountSum">8888</td>
							<td style="text-align:right;" id="amountSum">8888.88</td>
							<td style="text-align:right;" id="actualSum">8888.88</td>
						</tr>
					</table>
				</td>
			</tr>
			<tr>
				<td>
					<table>
						<tr>
							<td style="width: 20px; height: 20px" />
							<td style="width: 120px;" class="shiftInfo">抹数金额：</td>
							<td style="width: 70px; text-align:right;" id="eraseAmount">8888.88</td>
							<td style="width: 20px; height: 20px" />
							<td style="width: 120px;" class="shiftInfo">抹数账单数：</td>
							<td style="width: 70px; text-align:right;" id="eraseIncome">8888</td>
						</tr>
						<tr>
							<td style="width: 20px; height: 20px" />
							<td style="width: 120px;" class="shiftInfo">折扣金额：</td>
							<td style="width: 70px; text-align:right;" id="discountAmount">8888.88</td>
							<td style="width: 20px; height: 20px" />
							<td style="width: 120px;" class="shiftInfo">折扣账单数：</td>
							<td style="width: 70px; text-align:right;" id="discountBillCount">8888</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">赠送金额：</td>
							<td style="text-align:right;" id="giftAmount">8888.88</td>
							<td style="width: 20px;" />
							<td class="shiftInfo">赠送账单数：</td>
							<td style="text-align:right;" id="giftBillCount">8888</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">退菜金额：</td>
							<td style="text-align:right;" id="returnAmount">8888.88</td>
							<td style="width: 20px;" />
							<td class="shiftInfo">退菜账单数：</td>
							<td style="text-align:right;" id="returnBillCount">8888</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">反结帐金额：</td>
							<td style="text-align:right;" id="repayAmount">8888.88</td>
							<td style="width: 20px;" />
							<td class="shiftInfo">反结帐账单数：</td>
							<td style="text-align:right;" id="repayBillCount">8888</td>
						</tr>
						<tr>
							<td style="height: 20px" />
							<td class="shiftInfo">服务费收入：</td>
							<td style="text-align:right;" id="serviceAmount">8888</td>
							<!-- 
							<td class="shiftInfo">服务费账单数：</td>
							<td id="serviceBillCount">210</td>
							 -->
						</tr>
					</table>
				</td>
			</tr>
			<!-- <tr>
				<td><table>
						<tr>
							<td style="width: 27px; height: 30px" />
							<td style="width: 140px" class="shiftInfo">部门</td>
							<td style="width: 140px" class="shiftInfo">折扣</td>
							<td style="width: 140px" class="shiftInfo">赠送</td>
							<td style="width: 140px" class="shiftInfo">金额</td>
						</tr>
						<tr>
							<td style="width: 27px; height: 30px" />
							<td class="shiftInfo">中厨</td>
							<td>1000</td>
							<td>1243.43</td>
							<td>1243</td>
						</tr>
					</table></td>
			</tr>
			 -->
		</table>
	</div>
	
</body>
</html>